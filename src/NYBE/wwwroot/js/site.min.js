$("#schoolSelectBox").change(function () { var n = $("#schoolSelectBox").find(":selected").val(); ($("#courseSelectBox > option").show().removeAttr("disabled"), n != "-1") && $("#courseSelectBox > option").each(function () { var t = $(this).attr("class"); console.log(t); t > 0 && t != n && $(this).hide().attr("disabled", "disabled") }) }); $("#courseID").change(function () { $("#courseNum").val(this.value); }); $("#courseNum").change(function () { $("#courseID").html('<option value="' + this.value + '">' + this.value + '</option>'); $("#courseID").val(this.value); }); $("#newCourseCheckBox").click(function () { if (document.getElementById("newCourseCheckBox").checked) { $("#courseForm").show(); $("#courseIDContainer").hide(); $("#courseIDHtml").html(document.getElementById("courseID").innerHTML); $("#courseDept").val(""); $("#courseNum").val(""); $("#courseName").val(""); } else { $("#courseForm").hide(); $("#courseID").html(document.getElementById("courseIDHtml").innerHTML); $("#courseID").each(function () { this.selectedIndex = 0 }); $("#courseIDContainer").show(); $("#courseDept").val("null"); $("#courseNum").val(-1); $("#courseName").val("null"); } }); $("#surveyTradeCheckBox").click(function () { console.log("Clicked!"); document.getElementById("surveyTradeCheckBox").checked ? ($("#surveyPriceDiv").hide(), $("#surveyPrice").val(-1)) : $("#surveyPriceDiv").show() }); window.onload = function () { getList("getSchools", "#schoolSelectBox"); getList("getCourses", "#courseSelectBox") }; getList = function (n, t) { $.getJSON("Search/" + n, function (n) { for (var i, u = t == "#courseSelectBox" ? '<option class="-1" value="">All<\/option>' : '<option value="-1">All<\/option>', r = 0; r < n.length; r++) i = n[r].toString().split(":"), u += t == "#courseSelectBox" ? '<option class="' + i[0] + '" value="' + i[1] + '">' + i[1] + "<\/option>" : '<option value="' + i[0] + '">' + i[1] + "<\/option>"; $(t).html(u) }) }; $("#googleBooksSearch").click(function () { var i = $("#gb_search_isbn").val(), n = new XMLHttpRequest, t; n.onreadystatechange = function () { var u, e, r; if (this.readyState === 4) if (this.status === 200) if (u = JSON.parse(this.responseText), u.totalItems > 0) { var n = u.items[0].volumeInfo, o = n.title, t = n.authors[0], s = n.publisher, h = t.slice(0, t.indexOf(" ")), c = t.slice(t.indexOf(" ") + 1), i = n.industryIdentifiers, f = i[0].identifier; i[1] && i[1].type === "ISBN_13" && (f = i[1].identifier); e = n.description; r = n.imageLinks.thumbnail; $("#gb_label_title").text(o); $("#gb_title").val(o); $("#gb_label_authorLName").text(c); $("#gb_authorLName").val(c); $("#gb_label_authorFName").text(h); $("#gb_authorFName").val(h); $("#gb_label_isbn").text(f); $("#gb_isbn").val(f); $("#gb_label_description").text(e); $("#gb_description").val(e); $("#gb_label_image").text(r); $("#gb_image").val(r); $("#gb_imgDisplayarea").attr("src", r); $("#gb_edition").val(""); $("#gb_label_publisher").text(s); $("#gb_publisher").val(s); $("#gb_form").show() } else alert("Could not find the book you are searching for."); else alert("Could not find the book you are searching for.") }; t = "https://www.googleapis.com/books/v1/volumes?q=isbn:" + i + "&key=AIzaSyAFr1FsZceoWiIHKFdSnMPeixy_ePvMG6U"; n.open("GET", t, !0); n.send() });